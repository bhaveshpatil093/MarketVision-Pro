{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport toast from 'react-hot-toast';\nexport const useWebSocket = () => {\n  _s();\n  const [isConnected, setIsConnected] = useState(false);\n  const [latency, setLatency] = useState(0);\n  const [connectionStatus, setConnectionStatus] = useState('disconnected');\n  const [isMockMode, setIsMockMode] = useState(false);\n  const wsRef = useRef(null);\n  const reconnectTimeoutRef = useRef();\n  const pingIntervalRef = useRef();\n  const lastPingRef = useRef(0);\n  const subscriptionsRef = useRef(new Set());\n  const reconnectAttemptsRef = useRef(0);\n  const maxReconnectAttempts = 3; // Reduced from 5 to 3\n  const mockLatencyRef = useRef();\n  const connect = useCallback(() => {\n    var _wsRef$current;\n    if (((_wsRef$current = wsRef.current) === null || _wsRef$current === void 0 ? void 0 : _wsRef$current.readyState) === WebSocket.OPEN) {\n      return; // Already connected\n    }\n    try {\n      setConnectionStatus('connecting');\n      const ws = new WebSocket('ws://localhost:8000/ws/market-data');\n      wsRef.current = ws;\n\n      // Set a connection timeout\n      const connectionTimeout = setTimeout(() => {\n        if (ws.readyState !== WebSocket.OPEN) {\n          ws.close();\n          setConnectionStatus('error');\n          setIsMockMode(true);\n          toast.success('Switched to simulated data mode. All features available!', {\n            duration: 4000,\n            icon: 'ðŸŽ¯'\n          });\n        }\n      }, 5000); // 5 second timeout\n\n      ws.onopen = () => {\n        clearTimeout(connectionTimeout);\n        setIsConnected(true);\n        setConnectionStatus('connected');\n        setIsMockMode(false);\n        reconnectAttemptsRef.current = 0;\n        console.log('WebSocket connected');\n\n        // Start ping interval\n        pingIntervalRef.current = setInterval(() => {\n          if (ws.readyState === WebSocket.OPEN) {\n            lastPingRef.current = Date.now();\n            ws.send(JSON.stringify({\n              type: 'ping'\n            }));\n          }\n        }, 30000);\n\n        // Resubscribe to symbols\n        subscriptionsRef.current.forEach(symbol => {\n          ws.send(JSON.stringify({\n            type: 'subscribe',\n            symbol\n          }));\n        });\n        toast.success('Connected to real-time data feed');\n      };\n      ws.onmessage = event => {\n        try {\n          const message = JSON.parse(event.data);\n          if (message.type === 'pong') {\n            const now = Date.now();\n            const newLatency = now - lastPingRef.current;\n            setLatency(newLatency);\n          } else if (message.type === 'market_data_update') {\n            console.log('Market data update:', message);\n          } else if (message.type === 'subscription_response') {\n            if (message.symbol && message.success) {\n              console.log(`Subscribed to ${message.symbol}`);\n            }\n          } else if (message.type === 'unsubscription_response') {\n            if (message.symbol && message.success) {\n              console.log(`Unsubscribed from ${message.symbol}`);\n            }\n          }\n        } catch (error) {\n          console.error('Failed to parse WebSocket message:', error);\n        }\n      };\n      ws.onclose = event => {\n        clearTimeout(connectionTimeout);\n        setIsConnected(false);\n        setConnectionStatus('disconnected');\n        console.log('WebSocket disconnected:', event.code, event.reason);\n\n        // Clear intervals\n        if (pingIntervalRef.current) {\n          clearInterval(pingIntervalRef.current);\n        }\n\n        // If this is the first connection attempt and it fails, switch to mock mode\n        if (reconnectAttemptsRef.current === 0) {\n          setIsMockMode(true);\n          toast.success('Using simulated data mode. All features are fully functional!', {\n            duration: 4000,\n            icon: 'ðŸŽ¯'\n          });\n          return;\n        }\n\n        // Attempt to reconnect if not a normal closure and we haven't exceeded max attempts\n        if (event.code !== 1000 && reconnectAttemptsRef.current < maxReconnectAttempts) {\n          reconnectAttemptsRef.current++;\n          const delay = Math.min(1000 * Math.pow(2, reconnectAttemptsRef.current), 10000); // Max 10s delay\n\n          console.log(`Attempting to reconnect in ${delay}ms (attempt ${reconnectAttemptsRef.current}/${maxReconnectAttempts})...`);\n          reconnectTimeoutRef.current = setTimeout(() => {\n            connect();\n          }, delay);\n        } else if (reconnectAttemptsRef.current >= maxReconnectAttempts) {\n          setConnectionStatus('error');\n          setIsMockMode(true);\n          toast.success('Using simulated data mode. All features are fully functional!', {\n            duration: 4000,\n            icon: 'ðŸŽ¯'\n          });\n        }\n      };\n      ws.onerror = error => {\n        clearTimeout(connectionTimeout);\n        console.error('WebSocket error:', error);\n        setConnectionStatus('error');\n\n        // If this is the first connection attempt, switch to mock mode immediately\n        if (reconnectAttemptsRef.current === 0) {\n          setIsMockMode(true);\n          toast.success('Using simulated data mode. All features are fully functional!', {\n            duration: 4000,\n            icon: 'ðŸŽ¯'\n          });\n        }\n      };\n    } catch (error) {\n      console.error('Failed to create WebSocket connection:', error);\n      setConnectionStatus('error');\n      setIsMockMode(true);\n      toast.success('Using simulated data mode. All features are fully functional!', {\n        duration: 4000,\n        icon: 'ðŸŽ¯'\n      });\n    }\n  }, []);\n  const disconnect = useCallback(() => {\n    if (wsRef.current) {\n      wsRef.current.close(1000, 'Client disconnect');\n      wsRef.current = null;\n    }\n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n    }\n    if (pingIntervalRef.current) {\n      clearInterval(pingIntervalRef.current);\n    }\n    if (mockLatencyRef.current) {\n      clearInterval(mockLatencyRef.current);\n    }\n    setIsConnected(false);\n    setConnectionStatus('disconnected');\n    setIsMockMode(false);\n    reconnectAttemptsRef.current = 0;\n  }, []);\n  const subscribe = useCallback(symbol => {\n    var _wsRef$current2;\n    if (((_wsRef$current2 = wsRef.current) === null || _wsRef$current2 === void 0 ? void 0 : _wsRef$current2.readyState) === WebSocket.OPEN) {\n      wsRef.current.send(JSON.stringify({\n        type: 'subscribe',\n        symbol\n      }));\n      subscriptionsRef.current.add(symbol);\n    } else {\n      // Store subscription for when connection is established\n      subscriptionsRef.current.add(symbol);\n    }\n  }, []);\n  const unsubscribe = useCallback(symbol => {\n    var _wsRef$current3;\n    if (((_wsRef$current3 = wsRef.current) === null || _wsRef$current3 === void 0 ? void 0 : _wsRef$current3.readyState) === WebSocket.OPEN) {\n      wsRef.current.send(JSON.stringify({\n        type: 'unsubscribe',\n        symbol\n      }));\n    }\n    subscriptionsRef.current.delete(symbol);\n  }, []);\n  const sendMessage = useCallback(message => {\n    var _wsRef$current4;\n    if (((_wsRef$current4 = wsRef.current) === null || _wsRef$current4 === void 0 ? void 0 : _wsRef$current4.readyState) === WebSocket.OPEN) {\n      wsRef.current.send(JSON.stringify(message));\n    } else {\n      console.warn('WebSocket not connected, cannot send message:', message);\n    }\n  }, []);\n\n  // Start mock latency simulation when in mock mode\n  useEffect(() => {\n    if (isMockMode) {\n      mockLatencyRef.current = setInterval(() => {\n        setLatency(Math.floor(Math.random() * 50) + 10); // Random latency between 10-60ms\n      }, 5000);\n    } else {\n      if (mockLatencyRef.current) {\n        clearInterval(mockLatencyRef.current);\n      }\n    }\n    return () => {\n      if (mockLatencyRef.current) {\n        clearInterval(mockLatencyRef.current);\n      }\n    };\n  }, [isMockMode]);\n\n  // Auto-connect on mount\n  useEffect(() => {\n    connect();\n    return () => {\n      disconnect();\n    };\n  }, [connect, disconnect]);\n  return {\n    isConnected,\n    latency,\n    subscribe,\n    unsubscribe,\n    sendMessage,\n    connectionStatus,\n    isMockMode\n  };\n};\n_s(useWebSocket, \"ZZHX47dG/BRm2LkTYi7K4Rx4Jqc=\");","map":{"version":3,"names":["useState","useEffect","useRef","useCallback","toast","useWebSocket","_s","isConnected","setIsConnected","latency","setLatency","connectionStatus","setConnectionStatus","isMockMode","setIsMockMode","wsRef","reconnectTimeoutRef","pingIntervalRef","lastPingRef","subscriptionsRef","Set","reconnectAttemptsRef","maxReconnectAttempts","mockLatencyRef","connect","_wsRef$current","current","readyState","WebSocket","OPEN","ws","connectionTimeout","setTimeout","close","success","duration","icon","onopen","clearTimeout","console","log","setInterval","Date","now","send","JSON","stringify","type","forEach","symbol","onmessage","event","message","parse","data","newLatency","error","onclose","code","reason","clearInterval","delay","Math","min","pow","onerror","disconnect","subscribe","_wsRef$current2","add","unsubscribe","_wsRef$current3","delete","sendMessage","_wsRef$current4","warn","floor","random"],"sources":["/Users/bhaveshpatil/Developer/HFT Projects/1/MarketVision-Pro/frontend/src/hooks/useWebSocket.ts"],"sourcesContent":["import { useState, useEffect, useRef, useCallback } from 'react';\nimport toast from 'react-hot-toast';\n\ninterface WebSocketMessage {\n  type: string;\n  symbol?: string;\n  data?: any;\n  timestamp: string;\n  success?: boolean;\n}\n\ninterface UseWebSocketReturn {\n  isConnected: boolean;\n  latency: number;\n  subscribe: (symbol: string) => void;\n  unsubscribe: (symbol: string) => void;\n  sendMessage: (message: any) => void;\n  connectionStatus: 'connecting' | 'connected' | 'disconnected' | 'error';\n  isMockMode: boolean;\n}\n\nexport const useWebSocket = (): UseWebSocketReturn => {\n  const [isConnected, setIsConnected] = useState(false);\n  const [latency, setLatency] = useState(0);\n  const [connectionStatus, setConnectionStatus] = useState<'connecting' | 'connected' | 'disconnected' | 'error'>('disconnected');\n  const [isMockMode, setIsMockMode] = useState(false);\n  const wsRef = useRef<WebSocket | null>(null);\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout>();\n  const pingIntervalRef = useRef<NodeJS.Timeout>();\n  const lastPingRef = useRef<number>(0);\n  const subscriptionsRef = useRef<Set<string>>(new Set());\n  const reconnectAttemptsRef = useRef<number>(0);\n  const maxReconnectAttempts = 3; // Reduced from 5 to 3\n  const mockLatencyRef = useRef<NodeJS.Timeout>();\n\n  const connect = useCallback(() => {\n    if (wsRef.current?.readyState === WebSocket.OPEN) {\n      return; // Already connected\n    }\n\n    try {\n      setConnectionStatus('connecting');\n      const ws = new WebSocket('ws://localhost:8000/ws/market-data');\n      wsRef.current = ws;\n\n      // Set a connection timeout\n      const connectionTimeout = setTimeout(() => {\n        if (ws.readyState !== WebSocket.OPEN) {\n          ws.close();\n          setConnectionStatus('error');\n          setIsMockMode(true);\n          toast.success('Switched to simulated data mode. All features available!', {\n            duration: 4000,\n            icon: 'ðŸŽ¯'\n          });\n        }\n      }, 5000); // 5 second timeout\n\n      ws.onopen = () => {\n        clearTimeout(connectionTimeout);\n        setIsConnected(true);\n        setConnectionStatus('connected');\n        setIsMockMode(false);\n        reconnectAttemptsRef.current = 0;\n        console.log('WebSocket connected');\n        \n        // Start ping interval\n        pingIntervalRef.current = setInterval(() => {\n          if (ws.readyState === WebSocket.OPEN) {\n            lastPingRef.current = Date.now();\n            ws.send(JSON.stringify({ type: 'ping' }));\n          }\n        }, 30000);\n        \n        // Resubscribe to symbols\n        subscriptionsRef.current.forEach(symbol => {\n          ws.send(JSON.stringify({ type: 'subscribe', symbol }));\n        });\n        \n        toast.success('Connected to real-time data feed');\n      };\n\n      ws.onmessage = (event) => {\n        try {\n          const message: WebSocketMessage = JSON.parse(event.data);\n          \n          if (message.type === 'pong') {\n            const now = Date.now();\n            const newLatency = now - lastPingRef.current;\n            setLatency(newLatency);\n          } else if (message.type === 'market_data_update') {\n            console.log('Market data update:', message);\n          } else if (message.type === 'subscription_response') {\n            if (message.symbol && message.success) {\n              console.log(`Subscribed to ${message.symbol}`);\n            }\n          } else if (message.type === 'unsubscription_response') {\n            if (message.symbol && message.success) {\n              console.log(`Unsubscribed from ${message.symbol}`);\n            }\n          }\n        } catch (error) {\n          console.error('Failed to parse WebSocket message:', error);\n        }\n      };\n\n      ws.onclose = (event) => {\n        clearTimeout(connectionTimeout);\n        setIsConnected(false);\n        setConnectionStatus('disconnected');\n        console.log('WebSocket disconnected:', event.code, event.reason);\n        \n        // Clear intervals\n        if (pingIntervalRef.current) {\n          clearInterval(pingIntervalRef.current);\n        }\n        \n        // If this is the first connection attempt and it fails, switch to mock mode\n        if (reconnectAttemptsRef.current === 0) {\n          setIsMockMode(true);\n          toast.success('Using simulated data mode. All features are fully functional!', {\n            duration: 4000,\n            icon: 'ðŸŽ¯'\n          });\n          return;\n        }\n        \n        // Attempt to reconnect if not a normal closure and we haven't exceeded max attempts\n        if (event.code !== 1000 && reconnectAttemptsRef.current < maxReconnectAttempts) {\n          reconnectAttemptsRef.current++;\n          const delay = Math.min(1000 * Math.pow(2, reconnectAttemptsRef.current), 10000); // Max 10s delay\n          \n          console.log(`Attempting to reconnect in ${delay}ms (attempt ${reconnectAttemptsRef.current}/${maxReconnectAttempts})...`);\n          reconnectTimeoutRef.current = setTimeout(() => {\n            connect();\n          }, delay);\n        } else if (reconnectAttemptsRef.current >= maxReconnectAttempts) {\n          setConnectionStatus('error');\n          setIsMockMode(true);\n          toast.success('Using simulated data mode. All features are fully functional!', {\n            duration: 4000,\n            icon: 'ðŸŽ¯'\n          });\n        }\n      };\n\n      ws.onerror = (error) => {\n        clearTimeout(connectionTimeout);\n        console.error('WebSocket error:', error);\n        setConnectionStatus('error');\n        \n        // If this is the first connection attempt, switch to mock mode immediately\n        if (reconnectAttemptsRef.current === 0) {\n          setIsMockMode(true);\n          toast.success('Using simulated data mode. All features are fully functional!', {\n            duration: 4000,\n            icon: 'ðŸŽ¯'\n          });\n        }\n      };\n\n    } catch (error) {\n      console.error('Failed to create WebSocket connection:', error);\n      setConnectionStatus('error');\n      setIsMockMode(true);\n      toast.success('Using simulated data mode. All features are fully functional!', {\n        duration: 4000,\n        icon: 'ðŸŽ¯'\n      });\n    }\n  }, []);\n\n  const disconnect = useCallback(() => {\n    if (wsRef.current) {\n      wsRef.current.close(1000, 'Client disconnect');\n      wsRef.current = null;\n    }\n    \n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n    }\n    \n    if (pingIntervalRef.current) {\n      clearInterval(pingIntervalRef.current);\n    }\n    \n    if (mockLatencyRef.current) {\n      clearInterval(mockLatencyRef.current);\n    }\n    \n    setIsConnected(false);\n    setConnectionStatus('disconnected');\n    setIsMockMode(false);\n    reconnectAttemptsRef.current = 0;\n  }, []);\n\n  const subscribe = useCallback((symbol: string) => {\n    if (wsRef.current?.readyState === WebSocket.OPEN) {\n      wsRef.current.send(JSON.stringify({ type: 'subscribe', symbol }));\n      subscriptionsRef.current.add(symbol);\n    } else {\n      // Store subscription for when connection is established\n      subscriptionsRef.current.add(symbol);\n    }\n  }, []);\n\n  const unsubscribe = useCallback((symbol: string) => {\n    if (wsRef.current?.readyState === WebSocket.OPEN) {\n      wsRef.current.send(JSON.stringify({ type: 'unsubscribe', symbol }));\n    }\n    subscriptionsRef.current.delete(symbol);\n  }, []);\n\n  const sendMessage = useCallback((message: any) => {\n    if (wsRef.current?.readyState === WebSocket.OPEN) {\n      wsRef.current.send(JSON.stringify(message));\n    } else {\n      console.warn('WebSocket not connected, cannot send message:', message);\n    }\n  }, []);\n\n  // Start mock latency simulation when in mock mode\n  useEffect(() => {\n    if (isMockMode) {\n      mockLatencyRef.current = setInterval(() => {\n        setLatency(Math.floor(Math.random() * 50) + 10); // Random latency between 10-60ms\n      }, 5000);\n    } else {\n      if (mockLatencyRef.current) {\n        clearInterval(mockLatencyRef.current);\n      }\n    }\n\n    return () => {\n      if (mockLatencyRef.current) {\n        clearInterval(mockLatencyRef.current);\n      }\n    };\n  }, [isMockMode]);\n\n  // Auto-connect on mount\n  useEffect(() => {\n    connect();\n    \n    return () => {\n      disconnect();\n    };\n  }, [connect, disconnect]);\n\n  return {\n    isConnected,\n    latency,\n    subscribe,\n    unsubscribe,\n    sendMessage,\n    connectionStatus,\n    isMockMode\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}